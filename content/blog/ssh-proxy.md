# SSH 代理

## 正向代理

```
ssh -L 8096:127.0.0.1:8096 root@192.168.6.1
```

```sh
ssh -L 127.0.0.1:8096:192.168.6.197:8096 root@192.168.6.1
```

执行上面命令后，就将远程主机访问 `192.168.6.197:8096` 端口映射到本机端口 `127.0.0.1:8096` 了

在本机访问 `127.0.0.1:8096` 相当于在远程主机上访问 `192.168.6.197:8096` 了

## 反向代理

```sh
ssh -R 127.0.0.1:7890:192.168.6.1:7890 root@xx.xx.xx.xx
```

用途之一：让远程主机使用本机的网络

执行上面的命令，将本地的 192.168.6.1:7890 映射到远程主机的 127.0.0.1:7890，在远程主机访问 127.0.0.1:7890 相当于在本机访问 192.168.6.1:7890 了

测试：

在远程主机上执行

```sh
export http_proxy=127.0.0.1:7890
export https_proxy=127.0.0.1:7890
curl "https://ip.oxylabs.io/"
```

或

```sh
curl --proxy "http://127.0.0.1:7890" "https://ip.oxylabs.io/"
```

## 创建 sock5 代理

```sh
ssh -D 1080 root@192.168.6.1
```

执行上面的命令，在本地 `1080` 端口创建一个 sock5 服务，在本机配置 sock5，请求数据就可以通过 ssh 代理出去了。

## 结合 frp使用

```sh
ssh -p 1234 root@frp.qwas.fun -L 127.0.0.1:80:127.0.0.1:80
```

借助 frp 实现远程访问路由器管理界面
